# example

## 内存模型

### 小端顺序

little-endian 内存中从低到高存储数据

### 大端顺序

big-endian 内存中从高到低存储数据

### x86

x86使用小端顺序

## 数据类型

### 内部数据类型

| 类型     | 说明                 |
|--------|--------------------|
| BYTE   | 8位无符号整数，B代表字节      |
| SBYTE  | 8位有符号整数，S代表有符号     |
| WORD   | 16位无符号整数           |
| SWORD  | 16位有符号整数           |
| DWORD  | 32位无符号整数，D代表双字     |
| SDWORD | 32位有符号整数，SD代表有符号双字 |
| FWORD  | 48位整数，保护模式中的远指针    |
| QWORD  | 64位整数，Q代表四字        |
| TBYTE  | 80位整数，T代表10个字节     |
| REAL4  | 32位IEEE短实数，4字节     |
| REAL8  | 64位IEEE长实数，8字节     |
| REAL10 | 80位IEEE扩展实数，10字节   |

### 传统数据伪指令

| 伪指令  | 说明           |
|------|--------------|
| DB   | 8位整数         |
| DW   | 16位整数        |
| DD   | 32位整数或实数     |
| DQ   | 64位整数或实数     |
| DT   | 定义80位整数，10字节 |

## 寄存器

### 概览

#### 8位寄存器

```text
AL、BL、CL、DL、DIL、SIL、BPL、SPL、R8L、R9L、R10L、R11L、R12L、R13L、R14L、R15L
```

#### 16位寄存器

```text
AX、BX、CX、DX、DI、SI、BP、SP、R8W、R9W、R10W、R11W、R12W、R13W、R14W、R15W
```

#### 32位寄存器

```text
EAX、EBX、ECX、EDX、EDI、ESI、EBP、ESP、R8D、R9D、R10D、R11D、R12D、R13D、R14D、R15D
```

#### 64位寄存器

```text
RAX、RBX、RCX、RDX、RDI、RSI、RBP、RSP、R8、R9、R10、R11、R12、R13、R14、R15
```

### 通用寄存器

| 16位  | 32位  | 64位  | 说明                | 英文名称                 | 寄存器类型 |
|------|------|------|-------------------|----------------------|-------|
| AX   | EAX  | RAX  | 累加寄存器             | Accumulator Register | 数据寄存器 |
| BX   | EBX  | RBX  | 基址寄存器             | Base Register        | 数据寄存器 |
| CX   | ECX  | RCX  | 计数寄存器             | Count Register       | 数据寄存器 |
| DX   | EDX  | RDX  | 数据寄存器             | Data Register        | 数据寄存器 |
| BP   | EBP  | RBP  | 基础指针              | Base Pointer         | 指针寄存器 |
| SP   | ESP  | RSP  | 栈指针，运行时堆栈是从高到低生长的 | Stack Pointer        | 指针寄存器 |
| SI   | ESI  | RSI  | 变址寄存器             | Source Index         | 索引寄存器 |
| DI   | EDI  | RDI  | 目标变址寄存器           | Destination Index    | 索引寄存器 |

### 段寄存器

| 16位  | 说明     | 英文名称          |
|------|--------|---------------|
| CS   | 代码段寄存器 | Code Segment  |
| DS   | 数据段寄存器 | Data Segment  |
| SS   | 栈段寄存器  | Stack Segment |
| ES   | 扩展段寄存器 | Extra Segment |

### 其他寄存器

| 16位   | 32位    | 64位    | 说明        | 英文名称                | 寄存器类型 |
|-------|--------|--------|-----------|---------------------|-------|
| IP    | EIP    | RIP    | 指令指针寄存器   | Instruction Pointer | 控制寄存器 |
| FLAGS | EFLAGS | RFLAGS | 存储当前进程的状态 | Flags               | 标志寄存器 |

### 通用寄存器重叠复用

| 64位  | 32位（低） | 16位（低） | 8位（高） | 8位（低） |
|------|--------|--------|-------|-------|
| RAX  | EAX    | AX     | AH    | AL    |
| RBX  | EBX    | BX     | BH    | BL    |
| RCX  | ECX    | CX     | CH    | CL    |
| RDX  | EDX    | DX     | DH    | DL    |

### 通用寄存器存储空间（以64位RAX为例）

| 8    | 7    | 6    | 5    | 4    | 3    | 2    | 1    |
|------|------|------|------|------|------|------|------|
| RAX  | RAX  | RAX  | RAX  | RAX  | RAX  | RAX  | RAX  |
|      |      |      |      | EAX  | EAX  | EAX  | EAX  |
|      |      |      |      |      |      | AX   | AX   |
|      |      |      |      |      |      | AH   |      |
|      |      |      |      |      |      |      | AL   |

## 标志位

标志位符号（0 清除 1置位）

| 符号   | 标志名称 |
|------|------|
| OV   | 溢出   |
| UP   | 方向   |
| EI   | 中断   |
| PL   | 符号   |
| ZR   | 零    |
| AC   | 辅助进位 |
| PE   | 奇偶   |
| CY   | 进位   |

## 指令

### 条件处理

| 指令名称  | 说明                                                |
|-------|---------------------------------------------------|
| AND   | 按位做与操作，立即操作数不能大于32位。[ x==1 && y==1 ? 1 : 0 ]      |
| OR    | 按位做或操作。[ x==1 &#x007c;&#x007c; y==1 ? 1 : 0 ]     |
| NOT   | 按位取反。 [ !x ]                                      |
| XOR   | 按位做异或操作。 [ x==y ? 0 : 1 ]                         |
| TEST  | 按位做与操作，并根据运算结果设置符号标志位、零标志位和奇偶标志位，但不会把结果存储在目标操作数中。 |
| CMP   | 比较两个操作数                                           |
| STC   | 进位标志位置为1                                          |
| CLC   | 清除进位标志位                                           |
| JC    | 进位跳转（进位标志位置1）                                     |
| JNC   | 无进位跳转（进位标志位清零）                                    |
| JZ    | 为零跳转（零标志位置1）                                      |
| JNZ   | 非零跳转（零标志位清零）                                      |
| JE    | 如果相等则跳转                                           |
| JNE   | 如果不相等则跳转                                          |
| JL    | 如果小于则跳转                                           |
| JG    | 如果大于则跳转                                           |
| JO    | 溢出跳转                                              |
| JNO   | 无溢出跳转                                             |
| JS    | 有符号跳转                                             |
| JNS   | 无符号跳转                                             |
| JP    | 偶校验跳转                                             |
| JNP   | 奇校验跳转                                             |
| JCXZ  | CX=0则跳转                                           |
| JECXZ | ECX=0则跳转                                          |
| JRCXZ | RCX=0则跳转（64位模式）                                   |

### 基于无符号数比较的跳转

| 指令名称 | 说明                |
|------|-------------------|
| JA   | 大于则跳转             |
| JNBE | 不小于或者等于则跳转（与JA相同） |
| JAE  | 大于或等于则跳转          |
| JNB  | 不小于则跳转（与JAE相同）    |
| JB   | 小于则跳转             |
| JNAE | 不大于或等于则跳转（与JB相同）  |
| JBE  | 小于或等于则跳转          |
| JNA  | 不大于则跳转（与JBE相同）    |

### 基于有符号数的比较

| 指令名称 | 说明               |
|------|------------------|
| JG   | 大于则跳转            |
| JNLE | 不小于或等于则跳转（与JG相同） |
| JGE  | 大于或等于则跳转         |
| JNL  | 不小于则跳转（与JGE相同）   |
| JL   | 小于则跳转            |
| JNGE | 不大于或等于则跳转（与JL相同） |
| JLE  | 小于或等于则跳转         |
| JNG  | 不大于则跳转（与JLE）     |

### 循环指令

| 指令名称   | 说明                        |
|--------|---------------------------|
| LOOP   | 当ECX大于0时进行循环，没循环一次，ECX减1  |
| LOOPZ  | 为零跳转，零标志位为1时才继续循环，其余同LOOP |
| LOOPE  | 相等跳转，相当于LOOPZ             |
| LOOPNZ | 非零跳转，零标志位为0时才继续循环，其余同LOOP |
| LOOPNE | 不相等跳转，相当于LOOPNZ           |

## 伪指令

| 指令名称     | 说明                         |
|----------|----------------------------|
| OFFSET   | 返回数据标号的偏移量                 |
| ALIGN    | 将一个变量对齐到字节边界、字边界、双字边界、段落边界 |
| PTR      | 重写一个已经被声明过的操作数的大小类型        |
| TYPE     | 返回变量某个元素的大小，单位是字节          |
| LENGTHOF | 计算数组中的元素个数                 |
| SIZEOF   | 等于TYPE*LENGTHOF，即占用的总字节大小  |
| LABEL    | 插入一个标号，并定义它的属性大小，但不分配存储空间  |